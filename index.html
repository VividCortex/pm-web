<!DOCTYPE html>
<html ng-app="psApp">
  <head>
    <title>Process manager</title>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <!-- Bootstrap -->
    <link href='css/bootstrap.min.css' rel='stylesheet'>
    <link href='css/custom.css' rel='stylesheet'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js'></script>
    <script src='https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js'></script>
    <![endif]-->
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular.min.js'></script>
    <script src="js/pm-web.js"></script>
  </head>
  <body>
    <div class='container'>
    <div class='page-header'>
      <h1>Process manager</h1>
    </div>
    <div ng-controller='ProcessListCtrl'>
     <div id="host-box" >
        <h3>Hosts</h3>
        <ul id="host-list" >
          <li class="host-item" ng-repeat="host in hosts">
            <input type='checkbox' ng-model='host.active'>
            <span>{{host.address}}</span>
            <button type='button' class='btn btn-danger btn-xs' ng-click='removeHost(host)'>Remove</button>
          </li>
        </ul>
        <select style="float:right" ng-model="orderProp">
          <option value="host.address">Host</option>
          <option value="id">Process ID</option>
          <option value="status">Status</option>
          <option value="runningProcTime">Running Time</option>
        </select>
        <div style="clear:right"></div>
        <div style="float:right">
          Filter: <input ng-model="filter">
        </div>
        <form ng-submit='addHost()'>
          <input type='text' ng-model='hostAddress' size='40' placeholder="[host]:[port]">
          <input class='btn btn-primary btn-sm' type='submit' value='add'>
        </form>
      </div>
      <table class='table table-condensed'>
        <tr>
          <th>Host</th>
          <th>Process ID</th>
          <th>Status <button type="button" class="btn btn-default btn-xs">
              <span class="glyphicon glyphicon-sort-by-attributes"></span>
          </button></th>
          <th>Running time (sec)</th>
          <th>Manage</th>
        </tr>
        <tr ng-repeat="process in processes | filter:filter | orderBy:orderProp">
          <td>{{process.host.address}}</td>
          <td><a href="http://{{process.host.address}}/procs/{{process.id}}/history" class="thumb">{{process.id}}</a></td>
          <td>{{process.status}}</td>
          <td>{{process.runningProcTime}}</td>
          <td>
            <button type="button" class="btn btn-danger btn-xs" ng-click="cancel(process)">Cancel</button>
          </td>
        </tr>
      </table>
    </div>
    </div>
  </body>
</html>
